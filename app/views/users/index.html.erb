
  <script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
  <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

  <%= favicon_link_tag 'favicon.ico' %>
  <%= stylesheet_link_tag "users" %>
  <%= javascript_include_tag "users" %>


<p id="notice"><%= notice %></p>
<div class='home_container'>
  <div class='home_side_bar'>
    <%= form_for @pin, :html => {:class => "user_pin_form"} do |pin_form|
    %>
      <%= pin_form.text_field :title,       :placeholder => 'Title' %><br/>
      <%= pin_form.text_field :description, 
        :placeholder => 'Description', 
        class: 'pin_form_desc' 
      %><br/>
      <%= pin_form.text_field :latitude,    
        :placeholder => 'Latitude', 
        class: 'pin_form_lat' 
      %><br/>
      <%= pin_form.text_field :longitude,   
        :placeholder => 'Longitude', 
        class: 'pin_form_long' 
      %><br/>
      <%= pin_form.text_field :user_id,     
        :placeholder => 'User ID',
        :value => @user.id
      %><br/>
      <%= pin_form.submit 'Pin Me' , class: 'btn btn-success' %>
    <% end %>

    <table class="user_pins table">
      <thead>
        <tr>
          <th>Title</th>
          <th colspan="2"></th>
        </tr>
      </thead>

      <tbody>
        <% @user_pins.each do |user_pin| %>
          <tr class="user_pins_row" id="pin_<%= user_pin.id %>" data-lat="<%= user_pin.latitude %>" data-lng="<%= user_pin.longitude %>">
            <td><a href="javascript:void(0)"><%= user_pin.title %></a></td>
            <td><%= link_to 'Destroy', :confirm => 'Are you sure?', :method => :delete   %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>  

  <div class='home_map map_contrainer'>
    <div id="gmap" class="map_canvas"></div>
    </div>
</div>

<script type="text/javascript">
// document ready runs these commands once the page loads
  $(document).ready(function(){
    $.maps.init();
    $('.user_pins_row').on('click', function(){
      $.maps.currentDest = $.maps.createMarker($(this).data("lat"), $(this).data('lng'), "destination");
      console.log("Cur dest: ", $.maps.currentDest);
      
    });
  });
</script>

